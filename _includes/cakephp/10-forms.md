Forms in CakePHP closely cooperate with models. Controllers provide the glue between the two. Controller code can be generated by the CakePHP console:

{% highlight bash %}
cd app
../lib/Cake/Console/cake bake
{% endhighlight %}

The generated controller does have methods for Create, Read, Update and Delete (CRUD) operations. Here is the generated method to add a project:

{% highlight php %}
<?php
class ProjectsController
{
  /**
   * edit method
   *
   * @throws NotFoundException
   * @param string $id
   * @return void
   */
	public function edit($id = null) {
		if (!$this->Project->exists($id)) {
			throw new NotFoundException(__('Invalid project'));
		}
		if ($this->request->is('post') || $this->request->is('put')) {
      unset($this->request->data['user_id']);
			if ($this->Project->save($this->request->data)) {
				$this->Session->setFlash(__('The project has been saved'), 'message-success');
				$this->redirect(array('action' => 'view', $id));
			} else {
				$this->Session->setFlash(__('The project could not be saved. Please, try again.'), 'message-error');
			}
		} else {
			$options = array('conditions' => array('Project.' . $this->Project->primaryKey => $id));
			$this->request->data = $this->Project->find('first', $options);
		}
		$users = $this->Project->User->find('list');
		$tags = $this->Project->Tag->find('list');
		$this->set(compact('users', 'tags'));

		$this->set('pageTitle', __('Edit project'));
	}
}
{% endhighlight %}

We have rearranged the edit template somewhat:

![CakePHP edit form]({{ site.url }}/fuxcon2013/img/cakephp-edit-form.png)

Here is a part of the file app/View/Projects/edit.ctp that creates this form:

{% highlight php %}
<div class="pull-right thumbnail">
	<?php
  echo $this->Thumbnail->render('project/' . $form->field('id') . '.jpg', array(
    'width' => 160, 
    'height' => 160, 
    'resizeOption' => 'auto',
  )); 
  ?>
</div>
<?php
echo $this->Form->input('picture', array(
  'type' => 'file',
  'id' => 'picture-field'
));
?>
{% endhighlight %}
