Most of the view code in our Drupal implementation is generated by the system. To make the design match our other implementations, we have created our own theme in sites/themes/fuxcon2013 and have provided some template files and preprocessor functions there. This is the contents of our theme directory:

File fuxcon2013.info is the only file required for a theme. It contains basic declaration and add our own style sheets and javascript to Drupal's output:

{% highlight ini %}
name = FUxCon2013
description = A theme based on Twitter Bootstrap for FUxCon2013.
package = FUxCon2013
core = 7.x
stylesheets[all][] = bootstrap/css/bootstrap.min.css
stylesheets[all][] = styles.css
scripts[] = bootstrap/js/bootstrap.min.js
{% endhighlight %}

The file template.php contains so called preprocessor functions. These manipulate variables that Drupal provides to the HTML it generates. Here is an example:

{% highlight php %}
<?php
function fuxcon2013_process_page(&$vars) {
  $vars['title'] = NULL;
  $vars['page']['header'][] = array('#markup' => theme('header', $vars));
}
{% endhighlight %}

This removes the standard title from all pages and adds a custom header from file header.tpl.php. Drupal templates are standard PHP that gets variables passed by Drupal. For example, this is file views-view-unformatted--projects.tpl.php which arranges projects into columns:

{% highlight php %}
<?php
// krumo(get_defined_vars());
$columns = array();
foreach ($rows as $i => $row) {
  $col = $i % FUXCON_NO_COLS;
  $columns[$col][] = $row;
}
?>

<?php foreach ($columns as $column): ?>
  <div class="span<?php echo FUXCON_COL_WIDTH; ?>">
  <?php foreach ($column as $project): ?>
    <?php echo $project; ?>
  <?php endforeach; ?>
  </div>
<?php endforeach; ?>
{% endhighlight %}

The most difficult part in theme development for Drupal is to know which files to overwrite and what variables get passed into these. In this example, we overwrite a template for the Views module. There also is a handy debug function that allows us to see all variables passed into the template:

{% highlight php %}
<?php
krumo(get_defined_vars());
{% endhighlight %}

Here is a screenshot from the admin interface of the Views module that shows which templates get loaded:

![Drupal Views admin]({{ site.url }}/fuxcon2013/img/drupal-view-theming.png)




